{
	"handler": {
		"type": "Chain",
		"config": {
			"filters": [{
				"type": "ScriptableFilter",
				"comment": "Update the given script according to your configuration",
				"config": {
					"type": "application/x-groovy",
					"file": "generate_sso_token.groovy"
				}
			}, {
				"type": "PolicyEnforcementFilter",
				"config": {
					"openamUrl": "${readProperties(system['user.home'].concat('/openig.properties'))['openamUrl']}",
					"pepUsername": "amadmin",
					"pepPassword": "secret12",
					"application": "${readProperties(system['user.home'].concat('/openig.properties'))['applicationName']}",
					"ssoTokenSubject": "${session.ssoTokenSubject}",
					"target": "${attributes.myPolicyDecision}"
				}
			}],
			"handler": {
				"comment": "A custom final resource the user wants to access and displaying the target to check the attributes",
				"type": "ScriptableHandler",
				"config": {
					"type": "application/x-groovy",
					"file": "pep-application-attributes.groovy"
				}
			}
		}
	},
	"condition": "${matches(request.uri.path, '/pep-policy-attributes')}"
}
